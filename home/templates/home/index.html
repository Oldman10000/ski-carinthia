{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin="" />
{% endblock %}

{% block content %}

<!-- Hero Image -->
<section id="hero">
    <div class="container">
        <div class="row text-center titles">
            <div class="col-12 mb-5">
                <h1 class="light-text">Ski Carinthia</h1>
            </div>
            <div class="col-12 mt-5 mb-5">
                <p class="dark-text">Get excited by the finest mountains in the eastern alps.</p>
            </div>
        </div>
    </div>
    <a href="#" class="scroll-down blue-text" address="true">
        <i class="fas fa-arrow-alt-circle-down"></i>
    </a>
</section>

<!-- main section in index page -->
<section id="index-main">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12 mt-5">
                <h2>Where To Go?</h2>
            </div>
            <div class="col-12 mt-5">
                <p>Carinthia has a wide range of mountains to suit every need. Find anything from family friendly
                    resorts to the
                    toughest mountains that even the most seasoned skiier will be challenged by.</p>
            </div>
        </div>
        <div class="row text-center mt-5">
            <div class="col-12 col-md-4 mt-3 mt-md-0">
                <div class="card">
                    <img src="../../../media/family-ski.jpg" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">
                            Best for Families
                        </h5>
                        <p class="card-text">View all of the most family friendly ski resorts in Carinthia!</p>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-4 mt-3 mt-md-0">
                <div class="card">
                    <img src="../../../media/view-ski.jpg" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">
                            Show me those views!
                        </h5>
                        <p class="card-text">View the carinthian resorts with the most beautiful landscapes!</p>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-4 mt-3 mt-md-0">
                <div class="card">
                    <img src="../../../media/hard-ski.jpg" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">
                            I want a challenge!
                        </h5>
                        <p class="card-text">View only the most challenging mountains!</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row text-center mt-5">
            <div class="col">
                <form method="GET">
                    <input type="text" class="form-control" name="q" placeholder="Find a mountain">
                </form>
            </div>
        </div>
    </div>
</section>

<section class="last-section">
    <div id="index-map">

    </div>
</section>

{% endblock %}

{% block postloadjs %}
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>
<script>
    $(document).ready(function () {

        // checks scroll position and changes navbar colour accordingly
        function checkScrollPosition() {
            var scroll = $(window).scrollTop();
            if (scroll >= 600) {
                $('header').removeClass('bg-transparent').addClass('bg-blue');
            } else {
                $('header').addClass('bg-transparent').removeClass('bg-blue');
            }
        }

        // checks window size and activates navbar colour function for large screens
        function largeOnlyNav() {
            if ($(window).width() > 960) {

                checkScrollPosition();

                $(window).scroll(function () {
                    checkScrollPosition();
                });
            }
        }

        largeOnlyNav();

        // checks window size and changes navbar colour accordingly
        function checkNav() {
            if ($(window).width() < 960) {
                $('header').removeClass('bg-transparent').addClass('bg-blue');
            } else {
                $('header').addClass('bg-transparent').removeClass('bg-blue');
            }
        }

        checkNav();

        // if window size is changed by user
        $(window).resize(function () {
            largeOnlyNav();
            checkNav();
        });

        // button to scroll to next section
        $('.scroll-down').click(function () {
            $('html, body').animate({
                scrollTop: $('#index-main').offset().top
            }, 'slow');
            return false;
        });

        var mapTileLayers = L.tileLayer(
            "http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}", {
                attribution: "Powered by <a href='https://developers.arcgis.com/terms/attribution/' target='_blank' rel='noopener'>Esri</a>"
            });

        var map = L.map("index-map", {
            layers: [mapTileLayers],
            center: [23.5, 12],
            zoom: 2
        }).setView([46.79, 13.95], 9);

        var skiIcon = new L.Icon({
            iconUrl: "../../../media/ski-icon2.png",
            iconSize: [25, 25],
            iconAnchor: [10, 25]
        })

        var heiligenBlut = L.marker([47.04, 12.85], {icon: skiIcon}).addTo(map).bindPopup("Heiligenblut");
        var moelltallerGletscher = L.marker([46.98, 13.05], {icon: skiIcon}).addTo(map);
    });
</script>
{% endblock %}